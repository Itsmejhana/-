<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Galaxia Gateway â€” No Snitchin'</title>
  <style>
    :root{--bg:#000;--fg:#00ff33;--popup-bg:rgba(0,0,0,.95);--popup-text:#ff4444}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
    body{background:var(--bg);color:var(--fg);display:flex;align-items:center;justify-content:center}
    h1{font-size:clamp(2rem,6vw,5rem);text-align:center;text-shadow:0 6px 20px rgba(0,0,0,.6)}
    /* Blackout overlay (covers whole page) */
    .blackout{
      position:fixed;inset:0;z-index:9998;display:flex;align-items:center;justify-content:center;
      background:#000;opacity:0;pointer-events:none;transition:opacity .18s ease;
    }
    .blackout.active{opacity:1;pointer-events:auto}
    /* Popup overlay shown on screenshot key press */
    .popup{
      position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;
      background:var(--popup-bg);backdrop-filter:blur(4px);color:var(--popup-text);font-weight:800;
      font-size:clamp(1.2rem,3vw,2.5rem);text-align:center;padding:2rem;transform:translateY(20px) scale(.98);
      opacity:0;pointer-events:none;transition:opacity .18s ease,transform .18s cubic-bezier(.2,.9,.3,1);
    }
    .popup.show{opacity:1;pointer-events:auto;transform:translateY(0) scale(1);}
    .popup .close{display:block;margin-top:1rem;padding:.6rem 1rem;border-radius:8px;background:#111;color:#fff;border:0;cursor:pointer}
    /* small helper UI */
    .controls{position:fixed;left:1rem;bottom:1rem;color:#999;font-size:.9rem;z-index:5}
    .controls button{margin-left:.5rem;padding:.35rem .6rem;border-radius:6px;border:1px solid #333;background:#111;color:#fff;cursor:pointer}
  </style>
</head>
<body>
  <h1 id="title">Galaxia Gateway</h1>

  <div class="blackout" id="blackout" aria-hidden="true"></div>

  <div class="popup" id="popup" role="dialog" aria-modal="true" aria-hidden="true">
    <div>
      ðŸš« <span id="popupText">NO YOURE ASS STFU â€” NO SNITCHIN'</span> ðŸš«
      <div style="text-align:center">
        <button class="close" id="dismiss">Dismiss</button>
      </div>
    </div>
  </div>

  <div class="controls">
    Mode: <strong id="mode">Normal</strong>
    <button id="forceBlackout">Force Blackout</button>
    <button id="forceNormal">Unblackout</button>
  </div>

  <script>
    const popup = document.getElementById('popup');
    const blackout = document.getElementById('blackout');
    const dismiss = document.getElementById('dismiss');
    const modeLabel = document.getElementById('mode');
    let popupTimeout = null;

    // Show popup function
    function showPopup(message, duration = 3500) {
      document.getElementById('popupText').textContent = message;
      popup.classList.add('show');
      popup.setAttribute('aria-hidden','false');
      if (popupTimeout) clearTimeout(popupTimeout);
      popupTimeout = setTimeout(hidePopup, duration);
      // Also trigger a quick blackout flash to make screenshots sillier
      flashBlackout(350);
    }
    function hidePopup() {
      popup.classList.remove('show');
      popup.setAttribute('aria-hidden','true');
      if (popupTimeout) { clearTimeout(popupTimeout); popupTimeout = null; }
    }

    dismiss.addEventListener('click', hidePopup);

    // Blackout controls
    function setBlackout(active) {
      if (active) {
        blackout.classList.add('active');
        modeLabel.textContent = 'Blackout';
      } else {
        blackout.classList.remove('active');
        modeLabel.textContent = 'Normal';
      }
    }
    function flashBlackout(ms=250){
      setBlackout(true);
      setTimeout(()=>setBlackout(false), ms);
    }

    // Detect PrintScreen (works in some environments) and common save shortcuts
    document.addEventListener('keyup', (e) => {
      // e.key could be "PrintScreen" on some desktops; on some Chromebooks it may be "F5" or "Unidentified"
      if (e.key === 'PrintScreen' || e.code === 'PrintScreen') {
        showPopup("NO YOURE ASS STFU â€” NO SNITCHIN'");
      }
    });

    // Detect Ctrl/Cmd+S and prevent save-to-disk (and show popup)
    document.addEventListener('keydown', (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 's') {
        e.preventDefault();
        showPopup("NO YOURE ASS STFU â€” NO SNITCHIN'");
      }
      // Some Chromebook screenshot combos are ctrl+Show windows key â€” we listen for "Meta" + "Overview" isn't exposed.
    });

    // Also listen for common copy/context attempts
    document.addEventListener('copy', (e) => {
      showPopup("NO YOURE ASS STFU â€” NO SNITCHIN'");
    });
    document.addEventListener('contextmenu', (e) => {
      // briefly show popup but allow menu
      flashBlackout(200);
      showPopup("NO YOURE ASS STFU â€” NO SNITCHIN'", 1800);
    });

    // Visibility change: when tab becomes hidden (user switched apps, opened menu on mobile, etc.)
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        // When the document becomes hidden, immediately blackout (to try to make screenshots from other apps useless)
        setBlackout(true);
        // keep blackout active for a short period after returning
        // store timestamp to know when to remove blackout
        window._blackoutSince = Date.now();
      } else {
        // When they return, keep blackout for a short anti-screenshot cooldown
        const since = window._blackoutSince || 0;
        const elapsed = Date.now() - since;
        const keep = Math.max(600 - elapsed, 0);
        setTimeout(()=>setBlackout(false), keep);
      }
    });

    // When window/tab loses focus (user alt-tabs, opens quick settings on Chromebook, or switches app on mobile)
    window.addEventListener('blur', () => {
      setBlackout(true);
    });
    window.addEventListener('focus', () => {
      // small delay helps avoid flicker
      setTimeout(()=>setBlackout(false), 250);
    });

    // Page visibility / lifecycle events
    window.addEventListener('pagehide', () => setBlackout(true));
    window.addEventListener('pageshow', () => setBlackout(false));
    // Some devices fire 'freeze' when swapped out of memory
    window.addEventListener('freeze', () => setBlackout(true));
    window.addEventListener('resume', () => setBlackout(false));

    // Provide manual controls for testing
    document.getElementById('forceBlackout').addEventListener('click', ()=>setBlackout(true));
    document.getElementById('forceNormal').addEventListener('click', ()=>setBlackout(false));

    // Small helper: try to detect some Chromebook-specific keys via key codes (best-effort)
    document.addEventListener('keydown', (e) => {
      // On many Chromebooks the "Show windows" key has keyCode 183; screenshot combos vary.
      // If user presses Ctrl + 183 simulate popup (best-effort heuristic)
      if ((e.ctrlKey || e.metaKey) && e.keyCode === 183) {
        e.preventDefault();
        showPopup("NO YOURE ASS STFU â€” NO SNITCHIN'");
      }
    });

    // Accessibility: hide overlays from assistive technologies when inactive
    const obs = new MutationObserver(()=>{
      const vis = blackout.classList.contains('active');
      blackout.setAttribute('aria-hidden', String(!vis));
      popup.setAttribute('aria-hidden', String(!popup.classList.contains('show')));
    });
    obs.observe(blackout, { attributes: true, attributeFilter: ['class'] });
    obs.observe(popup, { attributes: true, attributeFilter: ['class'] });

    // Disclaimer console note
    console.log("Note: This page cannot truly prevent screenshots on ChromeOS, mobile, or desktop â€” it only simulates protections (popup + blackout on focus/visibility change).");
  </script>
</body>
</html>
